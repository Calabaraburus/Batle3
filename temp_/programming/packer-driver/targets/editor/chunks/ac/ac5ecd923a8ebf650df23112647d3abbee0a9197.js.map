{"version":3,"sources":["file:///C:/Projects/Cocos/ClbBlast/assets/entities/tiles/RocketTile/RocketTileInterBehaviour.ts"],"names":["_decorator","TileInterBehaviour","RocketTileController","ccclass","property","RocketTileInterBehaviour","tileClicked","field","tile","rocketTile","isVertical","logicField","row","forEach","t","isDestroied","tileModel","tileName","activate","destroyTile","col"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAmBA,MAAAA,U,OAAAA,U;;AAGVC,MAAAA,kB,iBAAAA,kB;;AAEAC,MAAAA,oB,iBAAAA,oB;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;AAE9B;AACA;AACA;;0CAEaK,wB,WADZF,OAAO,CAAC,0BAAD,C,gBAAR,MACaE,wBADb;AAAA;AAAA,oDACiE;AAC7DC,QAAAA,WAAW,CAACC,KAAD,EAAyBC,IAAzB,EAA+C;AAEtD,cAAI,EAAEA,IAAI;AAAA;AAAA,2DAAN,CAAJ,EAA6C;AACzC;AACH;;AAED,gBAAMC,UAAU,GAAGD,IAAnB;;AAEA,cAAI,CAACC,UAAU,CAACC,UAAhB,EAA4B;AACxBH,YAAAA,KAAK,CAACI,UAAN,CAAiBF,UAAU,CAACG,GAA5B,EAAiCC,OAAjC,CAA0CC,CAAD,IAAO;AAC5C,kBAAI,CAACA,CAAC,CAACC,WAAH,KAAmBD,CAAC,CAACE,SAAF,CAAYC,QAAZ,IAAwB,QAAxB,IACnBH,CAAC,CAACE,SAAF,CAAYC,QAAZ,IAAwB,MADxB,CAAJ,EACqC;AACjCH,gBAAAA,CAAC,CAACI,QAAF;AACH;AACJ,aALD;AAMAX,YAAAA,KAAK,CAACI,UAAN,CAAiBF,UAAU,CAACG,GAA5B,EAAiCC,OAAjC,CAA0CC,CAAD,IAAO;AAC5C,kBAAI,CAACA,CAAC,CAACC,WAAP,EAAoB;AAChBD,gBAAAA,CAAC,CAACK,WAAF;AACH;AACJ,aAJD;AAKH,WAZD,MAYO;AACHZ,YAAAA,KAAK,CAACI,UAAN,CAAiBE,OAAjB,CAA0BD,GAAD,IAAS;AAC9B,oBAAME,CAAC,GAAGF,GAAG,CAACJ,IAAI,CAACY,GAAN,CAAb;;AACA,kBAAI,CAACN,CAAC,CAACC,WAAH,IACCD,CAAC,CAACE,SAAF,CAAYC,QAAZ,IAAwB,MADzB,KAECH,CAAC,CAACE,SAAF,CAAYC,QAAZ,IAAwB,QAAxB,IACGH,CAAC,CAACE,SAAF,CAAYC,QAAZ,IAAwB,MAH5B,CAAJ,EAGyC;AACrCH,gBAAAA,CAAC,CAACI,QAAF;AACH;AACJ,aARD;AASAX,YAAAA,KAAK,CAACI,UAAN,CAAiBE,OAAjB,CAA0BD,GAAD,IAAS;AAC9B,oBAAME,CAAC,GAAGF,GAAG,CAACJ,IAAI,CAACY,GAAN,CAAb;;AACA,kBAAI,CAACN,CAAC,CAACC,WAAH,IAAmBD,CAAC,CAACE,SAAF,CAAYC,QAAZ,IAAwB,MAA/C,EAAwD;AACpDH,gBAAAA,CAAC,CAACK,WAAF;AACH;AACJ,aALD;AAMH;;AAEDV,UAAAA,UAAU,CAACU,WAAX;AAEH;;AAzC4D,O","sourcesContent":["import { CCString, _decorator, SpriteFrame, Component, Button } from 'cc';\r\nimport { FieldController } from '../../field/FieldController';\r\nimport { TileController } from '../TileController';\r\nimport { TileInterBehaviour } from '../TileInterBehaviour';\r\nimport { TileState } from '../TileState';\r\nimport { RocketTileController } from './RocketTileController';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Implements behaviour for rocket tiles\r\n */\r\n@ccclass('RocketTileInterBehaviour')\r\nexport class RocketTileInterBehaviour extends TileInterBehaviour {\r\n    tileClicked(field: FieldController, tile: TileController) {\r\n\r\n        if (!(tile instanceof RocketTileController)) {\r\n            return;\r\n        }\r\n\r\n        const rocketTile = tile as RocketTileController;\r\n\r\n        if (!rocketTile.isVertical) {\r\n            field.logicField[rocketTile.row].forEach((t) => {\r\n                if (!t.isDestroied && (t.tileModel.tileName == \"rocket\" ||\r\n                    t.tileModel.tileName == \"bomb\")) {\r\n                    t.activate();\r\n                }\r\n            });\r\n            field.logicField[rocketTile.row].forEach((t) => {\r\n                if (!t.isDestroied) {\r\n                    t.destroyTile();\r\n                }\r\n            });\r\n        } else {\r\n            field.logicField.forEach((row) => {\r\n                const t = row[tile.col];\r\n                if (!t.isDestroied &&\r\n                    (t.tileModel.tileName != \"star\") &&\r\n                    (t.tileModel.tileName == \"rocket\" ||\r\n                        t.tileModel.tileName == \"bomb\")) {\r\n                    t.activate();\r\n                }\r\n            });\r\n            field.logicField.forEach((row) => {\r\n                const t = row[tile.col];\r\n                if (!t.isDestroied && (t.tileModel.tileName != \"star\")) {\r\n                    t.destroyTile()\r\n                }\r\n            });\r\n        }\r\n\r\n        rocketTile.destroyTile();\r\n\r\n    }\r\n}\r\n"]}